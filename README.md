<p align="center">
  <a href="https://lipsum.com" target="blank"><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/ae6/c62/b55/ae6c62b55a83ba5f2f014751ee973d6e.jpg" width="420" alt="Yes yes yes" /></a>
</p>


  

## Description

Надо было сделать много чего но успел сделать только самую сложную часть.


## Почему Postgres

Потому что те задачи которые описаны в тестовом задании более менее надежно можно решить с помощью Postgres. Остальное - либо очень бедные просты базы либо очень дорогие решения такие как Oracle или Microsoft SQL Server

## Что сделано

Eventual consistency сделан полностью, сообщения не теряются, их нельзя удалить или сделать UPDATE, если очередь падает - сообщения собираются в нужном месте и когда очередь снова работает - сообщения отправляются в нужном порядке

Если база данных падает - сообщения собираются в очередь и когда база данных снова работает - сообщения отправляются в нужном порядке (восстановление) - нужно глубже теститть, пока сообщения собирабтся только в очередь - было бы время, я бы довел до конца

## Project setup


```bash
$ cp .env.example .env
$ docker-compose up -d --build
```


## Run tests

Unit-тестов пока нет

но нагрузочные тесты есть

```bash
$ node post-100_new_events.js 
```
запускает 100 новых событий конкаррент 


```bash
$ node post-1000_new_events.js 
```
запускает 1000 новых событий конкаррент 

```bash
# unit tests
скоро будет 
```
